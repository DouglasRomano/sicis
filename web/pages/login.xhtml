<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">

   <h:head>
      <title>Pagina de Login</title>
   </h:head>
   <body>
      <div id="content" title="div Login">
         <p:dialog header="FaÃ§a o seu Login" id="dialog" minWidth="400"
                   width="400" modal="true" closable="false" position="center"
                   showEffect="slide" draggable="true" resizable="false" visible="true">
            <form id="login" action="../j_spring_security_check" method="post">
               <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />

               <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false"
                         resizable="false" showHeader="false">           
                  <p:graphicImage value="../../resources/loading.gif" />
               </p:dialog>
               <p:panelGrid columns="2">
                  <h:outputLabel for="j_username" value="Username :" />
                  <p:inputText id="j_username" required="true"
                               requiredMessage="Campo Login Vazio"/>
                  <h:outputLabel for="j_password" value="Password :" />
                  <p:password id="j_password" required="true" 
                              requiredMessage="Campo senha Vazio"/>
                  <f:facet name="header">
                     <c:choose>
                        <c:when test="#{param.erro=='true'}">
                           <p:outputLabel value="Login Invalido" style="background-color: red"/>
                        </c:when>
                     </c:choose>
                  </f:facet>

                  <f:facet name="footer">
                     <p:row>
                        <p:outputPanel style="width: 100%; text-align:center"
                                       layout="block">
                           <input name="submit" type="submit" value="Log in"/>
                        </p:outputPanel>
                     </p:row>
                  </f:facet>
               </p:panelGrid>
            </form>
         </p:dialog>
      </div>

   </body>
</html>
